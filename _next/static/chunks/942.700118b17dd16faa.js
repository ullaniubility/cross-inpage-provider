(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{83859:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return IFrameHostExample}});var n=r(67294),o=r(57069),i=r(89490),u=r(85893);function IFrameHostExample(){var e=(0,n.useRef)(null);return(0,n.useLayoutEffect)(function(){var t,r;if(!e.current||!(null!=(t=e.current)&&t.contentWindow)){console.error("iframe not ready");return}window.hostBridge=new o.el({remoteFrame:null==(r=e.current)?void 0:r.contentWindow,remoteFrameName:"FRAME",selfFrameName:"HOST",channel:"onekey-js-sdk",receiveHandler:function(e){var t=e.data,r=t.method;if(console.log("receiveHandler >>>>> ",{method:r,params:t.params}),"hi"===r)return"from HOST: hahahah";if("hello"===r)return{message:"from HOST: okok"};if("error"===r)throw Error("from HOST: something is wrong")}})},[]),(0,u.jsxs)("div",{children:[["hi","hello","error"].map(function(e,t){return(0,u.jsxs)("button",{onClick:function(){(0,i.b)({method:e,params:[{index:t}]},window.hostBridge)},children:["sendToFrame (",e,")"]},e)}),(0,u.jsx)("iframe",{ref:e,src:"/iframe/frame",style:{width:"100%",height:"400px"},frameBorder:0}),(0,u.jsx)("iframe",{src:"/",style:{width:"100%",height:"400px"}})]})}},89490:function(e,t,r){"use strict";r.d(t,{b:function(){return sendMethod}});var n=r(15861);function sendMethod(e,t){return _sendMethod.apply(this,arguments)}function _sendMethod(){return(_sendMethod=(0,n.Z)(function*(e,t){var r=e.method,n=e.params;try{var o=yield null==t?void 0:t.request({scope:"$hardware_sdk",data:{method:r,params:n}});console.log("result >>>>",r," --> ",o)}catch(e){console.error("bridge send ERROR response: ",r," --> ",e)}})).apply(this,arguments)}},34155:function(e){var t,r,n,o=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var i=[],u=!1,a=-1;function cleanUpNextTick(){u&&n&&(u=!1,n.length?i=n.concat(i):a=-1,i.length&&drainQueue())}function drainQueue(){if(!u){var e=runTimeout(cleanUpNextTick);u=!0;for(var t=i.length;t;){for(n=i,i=[];++a<t;)n&&n[a].run();a=-1,t=i.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new Item(e,t)),1!==i.length||u||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}}]);
//# sourceMappingURL=942.700118b17dd16faa.js.map