(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6009],{6424:function(e,n,t){"use strict";t.d(n,{p:function(){return DAppList}}),t(67294);var s=t(36612),a=t.n(s),r=t(85893);function DAppList(e){var n=e.dapps;return(0,r.jsxs)("div",{className:a().container,children:[(0,r.jsx)("h3",{children:"Top DApps"}),(0,r.jsx)("ul",{children:n.map(function(e){return(0,r.jsx)("li",{children:(0,r.jsxs)("a",{href:e.url,target:"_blank",children:[e.name," ↗"]})},e.name)})})]})}},48679:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return tron_TronExample}});var s=t(15861),a=t(86854),r=t(67294),o=t(58005),d=t(6424),i=[{name:"SunSwap",url:"https://sunswap.com/#/home"},{name:"JustLendDAO",url:"https://app.justlend.org/#/home"},{name:"TRONSCAN",url:"https://tronscan.org/#/"},{name:"JUST CDP Portal",url:"https://juststable.tronscan.org/"}],l=t(85893),tron_TronExample=function(){var e=(0,r.useState)(!1),n=(0,a.Z)(e,2),t=n[0],c=n[1],u=(0,r.useState)(),p=(0,a.Z)(u,2),h=p[0],f=p[1],g=(0,r.useState)(""),m=(0,a.Z)(g,2);m[0],m[1];var x=(0,r.useState)([]),_=(0,a.Z)(x,2),v=_[0],b=_[1],j=(0,r.useRef)(),k=(0,r.useRef)(),y=(0,r.useRef)(),w=(0,r.useRef)(),C=(0,r.useRef)(),A=(0,r.useCallback)((0,s.Z)(function*(){yield h.request({method:"tron_requestAccounts"})}),[h]),S=(0,r.useCallback)((0,s.Z)(function*(){var e=yield h.request({method:"tron_accounts"}),n=(0,a.Z)(e,1)[0];try{var t=h.tronWeb,s=yield t.transactionBuilder.sendTrx(j.current.value,1e6,n),r=yield t.trx.sign(s),o=yield t.trx.sendRawTransaction(r);console.log("send native token result: ".concat(JSON.stringify(o)))}catch(e){console.log(e)}}),[h]),Z=(0,r.useCallback)((0,s.Z)(function*(){var e=yield h.request({method:"tron_accounts"}),n=(0,a.Z)(e,1)[0];try{var t=h.tronWeb,s=yield t.transactionBuilder.triggerSmartContract(y.current.value,"transfer(address,uint256)",{},[{type:"address",value:k.current.value},{type:"uint256",value:"1000000000000000000"}],n),r=yield t.trx.sign(s.transaction),o=yield t.trx.sendRawTransaction(r);console.log("send token result: ".concat(JSON.stringify(o)))}catch(e){console.log(e)}}),[h]),E=(0,r.useCallback)((0,s.Z)(function*(){try{yield h.request({method:"wallet_watchAsset",params:{type:"trc20",options:{address:"TF17BgPaZYbz8oxbjhriubPDsA7ArKoLX3",symbol:"JUST GOV",decimals:18,image:"https://static.tronscan.org/production/logo/just_icon.png"}}}),console.log("add token success")}catch(e){console.log(e)}}),[h]),L=(0,r.useCallback)((0,s.Z)(function*(){var e=yield h.request({method:"tron_accounts"}),n=(0,a.Z)(e,1)[0];try{var t=h.tronWeb,s=yield t.transactionBuilder.triggerSmartContract(y.current.value,"approve(address,uint256)",{},[{type:"address",value:k.current.value},{type:"uint256",value:"1000000000000000000"}],n),r=yield t.trx.sign(s.transaction),o=yield t.trx.sendRawTransaction(r);console.log("approve token result: ".concat(JSON.stringify(o)))}catch(e){console.log(e)}}),[h]),T=(0,r.useCallback)(function(){f(window.tronLink||new o.AX({}))},[]);return(0,r.useEffect)(function(){var e,n;h&&null!=h&&null!=(e=h.tronWeb)&&null!=(n=e.defaultAddress)&&n.base58&&(b([h.tronWeb.defaultAddress.base58]),c(!0))},[h]),(0,r.useEffect)(function(){window.tronLink?T():window.addEventListener("tronLink#initialized",T,{once:!0}),window.addEventListener("message",function(e){if(e.data.message&&"accountsChanged"===e.data.message.action&&(b([e.data.message.data.address].filter(function(e){return e})),console.log("tron accountsChanged",e.data.message.data)),e.data.message&&"setAccount"===e.data.message.action&&b([e.data.message.data.address].filter(function(e){return e})),e.data.message&&"connect"===e.data.message.action){var n,t;c(!0),b([null==(n=window.tronWeb)?void 0:null==(t=n.defaultAddress)?void 0:t.base58])}e.data.message&&"disconnect"===e.data.message.action&&c(!1)})},[T]),(0,l.jsxs)("div",{children:[(0,l.jsx)(d.p,{dapps:i}),!h&&(0,l.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"}),h&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:"Wallet is initialized"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{disabled:t,onClick:A,children:t?"connected":"connect wallet"}),t&&(0,l.jsx)("p",{children:v})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{ref:j,placeholder:"to address"}),(0,l.jsx)("button",{disabled:!t,onClick:S,children:"send 1 trx token"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{ref:y,placeholder:"token address"}),(0,l.jsx)("input",{ref:k,placeholder:"to address"}),(0,l.jsx)("button",{disabled:!t,onClick:Z,children:"send token"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{ref:C,placeholder:"token address"}),(0,l.jsx)("input",{ref:w,placeholder:"spender address"}),(0,l.jsx)("button",{disabled:!t,onClick:L,children:"approve token"})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{disabled:!t,onClick:E,children:"add trc20 token"})})]})]})}},36612:function(e){e.exports={container:"Home_container__d256j",main:"Home_main__VkIEL",footer:"Home_footer__yFiaX",title:"Home_title__hYX6j",description:"Home_description__uXNdx",code:"Home_code__VVrIr",grid:"Home_grid__AVljO",card:"Home_card__E5spL",logo:"Home_logo__IOQAX"}},88677:function(){}}]);
//# sourceMappingURL=6009.8819ae8df4f0ae01.js.map