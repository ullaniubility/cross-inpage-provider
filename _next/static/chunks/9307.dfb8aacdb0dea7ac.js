(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9307],{6424:function(n,e,t){"use strict";t.d(e,{p:function(){return DAppList}}),t(67294);var o=t(36612),s=t.n(o),r=t(85893);function DAppList(n){var e=n.dapps;return(0,r.jsxs)("div",{className:s().container,children:[(0,r.jsx)("h3",{children:"Top DApps"}),(0,r.jsx)("ul",{children:e.map(function(n){return(0,r.jsx)("li",{children:(0,r.jsxs)("a",{href:n.url,target:"_blank",children:[n.name," ↗"]})},n.name)})})]})}},73458:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return NearExample}});var o=t(15861),s=t(86854),r=t(67294),a=t(21299),i=t(68447),c=t(83608),l=t.n(c),u=t(13550),d=t.n(u),h=t(6424),f=[{name:"Paras",url:"https://paras.id/"},{name:"Learn Near Club",url:"https://learnnear.club/"},{name:"Ref Finance",url:"https://app.ref.finance/"}],_=t(85893);function toBN(n){return new(d())(null!=n?n:"",10)}function NearExample(){var n=(0,r.useState)(null),e=(0,s.Z)(n,2),t=e[0],c=e[1],u=(0,r.useState)(""),d=(0,s.Z)(u,2),g=d[0],v=d[1],m=(0,r.useState)(""),k=(0,s.Z)(m,2),p=k[0],x=k[1],j=(0,r.useState)(""),C=(0,s.Z)(j,2),y=C[0],w=C[1],b=(0,r.useCallback)((0,o.Z)(function*(){if(!t)return[];var n=l()(100,900)/1e4,e=l()(100,900)/1e4,o=i.transactions.transfer(toBN(i.utils.format.parseNearAmount("".concat(n)))),s=i.transactions.transfer(toBN(i.utils.format.parseNearAmount("".concat(e))));return[(yield t.createTransaction({receiverId:"bitcoinzhuo.testnet",actions:[o,s],nonceOffset:1})),(yield t.createTransaction({receiverId:"evmzyz.testnet",actions:[s],nonceOffset:2}))]}),[t]),q=(0,r.useCallback)(function(n){var e,t,o,s,r=(null==n?void 0:null==(e=n.accounts)?void 0:null==(t=e[0])?void 0:t.accountId)||"",a=(null==n?void 0:null==(o=n.accounts)?void 0:null==(s=o[0])?void 0:s.publicKey)||"";console.log("near onAccountsChanged >>>",r,a),v(r),x(a)},[]),I=(0,r.useCallback)(function(n){console.log("near onNetworkChanged >>>",n),w(n.networkId)},[]),S=(0,r.useMemo)(function(){return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",headers:{},keyStore:new i.keyStores.BrowserLocalStorageKeyStore}},[]);return(0,r.useEffect)(function(){var n=new a.qG({transactionCreator:void 0});return n.on("accountsChanged",q),n.on("networkChanged",I),window.provider=n,(0,o.Z)(function*(){if(yield n.detectWalletInstalled()){c(n);var e,t,o,s,r=yield n.request({method:"near_accounts"});v((null==r?void 0:null==(e=r.accounts)?void 0:null==(t=e[0])?void 0:t.accountId)||""),x((null==r?void 0:null==(o=r.accounts)?void 0:null==(s=o[0])?void 0:s.publicKey)||"");var a=yield n.request({method:"near_networkInfo"});w((null==a?void 0:a.networkId)||"")}})(),function(){n.off("accountsChanged",q),n.off("networkChanged",I)}},[S,q,I]),(0,_.jsxs)("div",{children:[(0,_.jsx)(h.p,{dapps:f}),!t&&(0,_.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"}),t&&(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{children:["accountId: ",(0,_.jsx)("strong",{children:g})]}),(0,_.jsxs)("div",{children:["publicKey: ",(0,_.jsx)("strong",{children:p})]}),(0,_.jsxs)("div",{children:["localNetworkId: ",(0,_.jsx)("strong",{children:t._networkId})," ",(0,_.jsx)("button",{children:"switch TODO"})]}),(0,_.jsxs)("div",{children:["walletNetworkId: ",(0,_.jsx)("strong",{children:y})]}),(0,_.jsxs)("div",{children:["providerVersion: ",(0,_.jsxs)("strong",{children:["v",t.version]})]}),(0,_.jsx)("hr",{}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield null==t?void 0:t.request({method:"near_requestAccounts"});console.log("near_requestAccounts",n,n.accounts)}),children:"near_requestAccounts"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield null==t?void 0:t.requestSignIn();console.log("requestSignIn",n,n.accounts)}),children:"requestSignIn"}),(0,_.jsx)("hr",{}),(0,_.jsx)("button",{onClick:function(){return null==t?void 0:t.request({method:"near_signOut"})},children:"near_signOut"}),(0,_.jsx)("button",{onClick:function(){return null==t?void 0:t.signOut()},children:"signOut"}),(0,_.jsx)("hr",{}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield null==t?void 0:t.request({method:"near_accounts",params:[]});console.log("near_accounts",n,n.accounts)}),children:"near_accounts"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield null==t?void 0:t.request({method:"near_networkInfo",params:[]});console.log("near_networkInfo",n,n.networkId)}),children:"near_networkInfo"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){console.log("near_accountNonce",(yield null==t?void 0:t.request({method:"near_accountNonce",params:[]})))}),children:"near_accountNonce"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){console.log("near_blockInfo",(yield null==t?void 0:t.request({method:"near_blockInfo",params:[]})))}),children:"near_blockInfo"}),(0,_.jsx)("hr",{}),(0,_.jsxs)("div",{children:[(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield b(),e=yield t.request({method:"near_sendTransactions",params:{transactions:n}});console.log("near_sendTransactions",e,e.transactionHashes)}),children:"near_sendTransactions"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield b(),e=yield t.requestSignTransactions({transactions:n});console.log("requestSignTransactions",e,e.transactionHashes)}),children:"requestSignTransactions"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield b(),e=yield t.request({method:"near_signTransactions",params:{transactions:n}});console.log("near_signTransactions",e,e.signatures)}),children:"near_signTransactions"}),(0,_.jsx)("button",{children:"TODO Send USDT Token (mainnet only)"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=l()(100,900)/1e4,e=l()(100,900)/1e4,o=i.utils.format.parseNearAmount(n.toString()),s=i.transactions.transfer(toBN(o)),r=i.transactions.transfer(toBN(i.utils.format.parseNearAmount(e.toString()))),a=t.account(),c=yield a.signAndSendTransaction({receiverId:"evmzyz.testnet",actions:[s,r]});console.log("signAndSendTransaction",c,c.status)}),children:"signAndSendTransaction (legacy)"}),(0,_.jsx)("hr",{}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield t.request({method:"near_signMessages",params:{messages:["hello world","onekey near wallet"]}});console.log("near_signMessages",n,n.signatures)}),children:"near_signMessages"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){var n=yield t.requestSignMessages({messages:["hello world","onekey near wallet"]});console.log("requestSignMessages",n,n.signatures)}),children:"requestSignMessages"}),(0,_.jsx)("hr",{}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){console.log("RPC Call: view_access_key_list",(yield t.request({method:"query",params:{request_type:"view_access_key_list",account_id:"c3be856133196da252d0f1083614cdc87a85c8aa8abeaf87daff1520355eec53",finality:"optimistic"}})))}),children:"RPC Call: view_access_key_list"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){console.log("RPC Call: gas_price",(yield t.request({method:"gas_price",params:[null]})))}),children:"RPC Call: gas_price"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){console.log("RPC Call: status",(yield t.request({method:"status",params:[]})))}),children:"RPC Call: status"}),(0,_.jsx)("button",{onClick:(0,o.Z)(function*(){console.log("RPC Call: network_info",(yield t.request({method:"network_info",params:[]})))}),children:"RPC Call: network_info"})]})]})]})}window.nearAPI=i,window.OneKeyNearProvider=a.qG},36612:function(n){n.exports={container:"Home_container__d256j",main:"Home_main__VkIEL",footer:"Home_footer__yFiaX",title:"Home_title__hYX6j",description:"Home_description__uXNdx",code:"Home_code__VVrIr",grid:"Home_grid__AVljO",card:"Home_card__E5spL",logo:"Home_logo__IOQAX"}},46601:function(){},71456:function(){},73105:function(){},55024:function(){}}]);
//# sourceMappingURL=9307.dfb8aacdb0dea7ac.js.map