(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1898],{64063:function(f){"use strict";f.exports=function equal(f,e){if(f===e)return!0;if(f&&e&&"object"==typeof f&&"object"==typeof e){if(f.constructor!==e.constructor)return!1;if(Array.isArray(f)){if((t=f.length)!=e.length)return!1;for(n=t;0!=n--;)if(!equal(f[n],e[n]))return!1;return!0}if(f.constructor===RegExp)return f.source===e.source&&f.flags===e.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===e.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===e.toString();if((t=(s=Object.keys(f)).length)!==Object.keys(e).length)return!1;for(n=t;0!=n--;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;for(n=t;0!=n--;){var t,n,s,i=s[n];if(!equal(f[i],e[i]))return!1}return!0}return f!=f&&e!=e}},47864:function(f,e,t){"use strict";t.r(e),t.d(e,{default:function(){return conflux_ConfluxExample}});var n,s,i,r,a=t(15861),o=t(86854),c=t(67294),d=t(10366),l=t(57069);let ProviderConfluxBase=class ProviderConfluxBase extends l.BX{constructor(f){super(f),this.providerName=d.U.conflux}request(f){return this.bridgeRequest(f)}};var u=t(64063),p=t(22519),h=t(14859);function deprecated(f,e){console.warn(`%cDEPRECATED ${f}: ${e}`,"color: red")}function isWalletEventMethodMatch(f,e){return f===`wallet_events_${e}`}(n=i||(i={})).EVENT="EVENT",n.METHOD="METHOD",n.PROPERTY="PROPERTY",(s=r||(r={})).CONNECT="connect",s.DISCONNECT="disconnect",s.ACCOUNTS_CHANGED="accountsChanged",s.CHAIN_CHANGED="chainChanged",s.MESSAGE="message",s.MESSAGE_LOW_LEVEL="message_low_level",s.NETWORK_CHANGED="networkChanged",s.CHAIN_ID_CHANGE="chainIdChanged";var __awaiter=function(f,e,t,n){return new(t||(t=Promise))(function(s,i){function fulfilled(f){try{step(n.next(f))}catch(f){i(f)}}function rejected(f){try{step(n.throw(f))}catch(f){i(f)}}function step(f){var e;f.done?s(f.value):((e=f.value)instanceof t?e:new t(function(f){f(e)})).then(fulfilled,rejected)}step((n=n.apply(f,e||[])).next())})};let ProviderConflux=class ProviderConflux extends ProviderConfluxBase{constructor(f){var e;super(Object.assign(Object.assign({},f),{bridge:f.bridge||(0,p.R)({timeout:f.timeout})})),this.isConfluxPortal=!0,this.isFluent=!0,this.isOneKey=!0,this._isConnected=!1,this._initialized=!1,this._chainId="",this._networkVersion="",this._selectedAddress="",this._accounts=[],this._log=null!==(e=f.logger)&&void 0!==e?e:window.console,this._registerEvents(),this._initializeState()}_initializeState(){return __awaiter(this,void 0,void 0,function*(){try{let f=yield this.request({method:"cfx_getProviderState"}),{chainId:e,networkId:t}=f;this.emit(r.CONNECT,{chainId:e,networkId:t})}catch(f){this._log.error("OneKey: Failed to get initial state. Please report this bug.",f)}finally{this._initialized=!0}})}_registerEvents(){window.addEventListener("onekey_bridge_disconnect",()=>{this._handleDisconnected()}),this.on(r.MESSAGE_LOW_LEVEL,f=>{let{method:e,params:t}=f;isWalletEventMethodMatch(e,r.ACCOUNTS_CHANGED)&&this._handleAccountsChanged(t),isWalletEventMethodMatch(e,r.CHAIN_CHANGED)&&this._handleChainChanged(t)}),this.on(r.CONNECT,()=>{this._isConnected=!0,this.request({method:"cfx_chainId"}).then(f=>{this._chainId=f;let e=parseInt(f,16);this._networkVersion=e.toString(10)}).catch(()=>{this._chainId="",this._networkVersion=""}),this.request({method:"cfx_accounts"}).then(f=>{f?this._selectedAddress=f[0]:this._selectedAddress=""}).catch(()=>this._selectedAddress=""),this.on(r.CHAIN_CHANGED,f=>{this._chainId=f;let e=parseInt(f,16);this._networkVersion=e.toString(10)}),this.on(r.ACCOUNTS_CHANGED,f=>{this._selectedAddress=f[0]})})}isAccountsChanged(f){return!u(this._accounts,f)}_handleAccountsChanged(f){let e=f;for(let t of(Array.isArray(f)||(this._log.error("Onekey: Received invalid accounts parameter. Please report this bug.",f),e=[]),e))if("string"!=typeof t){this._log.error("Onekey: Received non-string account. Please report this bug.",f),e=[];break}this.isAccountsChanged(e)&&(this._accounts=e,this._selectedAddress!==e[0]&&(this._selectedAddress=e[0]),this._initialized&&this.emit(r.ACCOUNTS_CHANGED,e))}isNetworkChanged(f){return f!==this._chainId}_handleChainChanged({chainId:f,networkId:e}={}){if(!f||"string"!=typeof f||!f.startsWith("0x")||!e||"string"!=typeof e){this._log.error("Onekey: Received invalid network parameters. Please report this bug.",{chainId:f,networkId:e});return}"loading"===e?this._handleDisconnected():(this._handleConnected({chainId:f,networkId:e}),this.isNetworkChanged(f)&&(this._chainId=f,this._initialized&&(this.emit(r.CHAIN_CHANGED,f),this.emit(r.NETWORK_CHANGED,e),this.emit(r.CHAIN_ID_CHANGE,f))))}_handleConnected(f){this._isConnected||(this._isConnected=!0,this.emit(r.CONNECT,f))}_handleDisconnected(){this._isConnected&&(this._isConnected=!1,this.emit(r.DISCONNECT))}isConnected(){return this._isConnected}request(f){return __awaiter(this,void 0,void 0,function*(){let{method:e,params:t}=f;if(!e||"string"!=typeof e||0===e.length)throw h.b$.rpc.methodNotFound();if(void 0!==t&&!Array.isArray(t)&&("object"!=typeof t||null===t))throw h.b$.rpc.invalidParams();f.method.startsWith("eth_")&&(f.method=f.method.replace("eth_","cfx_"));let n=yield this.bridgeRequest(f);return n})}on(f,e){return super.on(f,e)}off(f,e){return super.off(f,e)}emit(f,...e){return super.emit(f,...e)}get chainId(){return deprecated(i.PROPERTY,'"provider.chainId" is deprecated, please use "provider.request({method: "cfx_chainId"})" instead'),this._chainId}get networkVersion(){return deprecated(i.PROPERTY,'"provider.networkVersion" is deprecated, please use "provider.request({method: "net_version"})" instead'),this._networkVersion}get selectedAddress(){return deprecated(i.PROPERTY,'"provider.selectedAddress" is deprecated, please use "provider.request({method: "cfx_accounts"})" instead'),this._selectedAddress||null}enable(){return __awaiter(this,void 0,void 0,function*(){return deprecated(i.METHOD,'"provider.enable" is deprecated, please use "provider.request({method: "cfx_requestAccounts"})" instead'),this.request({method:"cfx_requestAccounts"})})}sendAsync(f,e){if(deprecated(i.METHOD,'"provider.sendAsync" is deprecated, please use "provider.request" instead'),"function"!=typeof e)throw Error("Invalid callback, not a function");this.request(f).then(f=>e(null,f)).catch(e)}send(f){return __awaiter(this,void 0,void 0,function*(){deprecated(i.METHOD,'"provider.send" is deprecated, please use "provider.request" instead');let e=yield this.request(f);return e})}};var b=new(t(72401)).Conflux().Contract({abi:[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"uint8",name:"_decimals",type:"uint8"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"uint256",name:"_totalSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_spender",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!1,internalType:"uint256",name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"remaining",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_spender",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"}],bytecode:"0x60806040523480156200001157600080fd5b50604051620010ca380380620010ca833981810160405260808110156200003757600080fd5b81019080805160405193929190846401000000008211156200005857600080fd5b838201915060208201858111156200006f57600080fd5b82518660018202830111640100000000821117156200008d57600080fd5b8083526020830192505050908051906020019080838360005b83811015620000c3578082015181840152602081019050620000a6565b50505050905090810190601f168015620000f15780820380516001836020036101000a031916815260200191505b5060405260200180519060200190929190805160405193929190846401000000008211156200011f57600080fd5b838201915060208201858111156200013657600080fd5b82518660018202830111640100000000821117156200015457600080fd5b8083526020830192505050908051906020019080838360005b838110156200018a5780820151818401526020810190506200016d565b50505050905090810190601f168015620001b85780820380516001836020036101000a031916815260200191505b50604052602001805190602001909291905050508360009080519060200190620001e49291906200026e565b5082600160006101000a81548160ff021916908360ff1602179055508160029080519060200190620002189291906200026e565b508060038190555080600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505050506200031d565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620002b157805160ff1916838001178555620002e2565b82800160010185558215620002e2579182015b82811115620002e1578251825591602001919060010190620002c4565b5b509050620002f19190620002f5565b5090565b6200031a91905b8082111562000316576000816000905550600101620002fc565b5090565b90565b610d9d806200032d6000396000f3fe608060405234801561001057600080fd5b50600436106100a95760003560e01c8063313ce56711610071578063313ce567146102935780635c658165146102b757806370a082311461032f57806395d89b4114610387578063a9059cbb1461040a578063dd62ed3e14610470576100a9565b806306fdde03146100ae578063095ea7b31461013157806318160ddd1461019757806323b872dd146101b557806327e235e31461023b575b600080fd5b6100b66104e8565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100f65780820151818401526020810190506100db565b50505050905090810190601f1680156101235780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b61017d6004803603604081101561014757600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610586565b604051808215151515815260200191505060405180910390f35b61019f610678565b6040518082815260200191505060405180910390f35b610221600480360360608110156101cb57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061067e565b604051808215151515815260200191505060405180910390f35b61027d6004803603602081101561025157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506109e9565b6040518082815260200191505060405180910390f35b61029b610a01565b604051808260ff1660ff16815260200191505060405180910390f35b610319600480360360408110156102cd57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610a14565b6040518082815260200191505060405180910390f35b6103716004803603602081101561034557600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610a39565b6040518082815260200191505060405180910390f35b61038f610a82565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103cf5780820151818401526020810190506103b4565b50505050905090810190601f1680156103fc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6104566004803603604081101561042057600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610b20565b604051808215151515815260200191505060405180910390f35b6104d26004803603604081101561048657600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610ce0565b6040518082815260200191505060405180910390f35b60008054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561057e5780601f106105535761010080835404028352916020019161057e565b820191906000526020600020905b81548152906001019060200180831161056157829003601f168201915b505050505081565b600081600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a36001905092915050565b60035481565b600080600560008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905082600460008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156107b5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f62616c616e636573206e6f7420656e6f7567680000000000000000000000000081525060200191505060405180910390fd5b8281101561082b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260148152602001807f616c6c6f77616e6365206e6f7420656e6f75676800000000000000000000000081525060200191505060405180910390fd5b82600460008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555082600460008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8110156109785782600560008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055505b8373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef856040518082815260200191505060405180910390a360019150509392505050565b60046020528060005260406000206000915090505481565b600160009054906101000a900460ff1681565b6005602052816000526040600020602052806000526040600020600091509150505481565b6000600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60028054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610b185780601f10610aed57610100808354040283529160200191610b18565b820191906000526020600020905b815481529060010190602001808311610afb57829003601f168201915b505050505081565b600081600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015610bd7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260138152602001807f62616c616e636573206e6f7420656e6f7567680000000000000000000000000081525060200191505060405180910390fd5b81600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a36001905092915050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490509291505056fea2646970667358221220ba3544f95832f9a6f264be220893ae1c951498e955e1908563105ee727d890c064736f6c634300060a0033"}),m={types:{CIP23Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}]},domain:{name:"Ether Mail",version:"1",chainId:1,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},primaryType:"Mail",message:{from:{name:"Cow",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]},to:[{name:"Bob",wallets:["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"]}],contents:"Hello, Bob!"}},y=t(6424),_=[{name:"MoonSwap",url:"https://moonswap.fi/exchange/swap"},{name:"ShuttleFlow",url:"https://shuttleflow.io/shuttle"},{name:"CONFLUXSCAN",url:"https://confluxscan.io/"},{name:"Stampers",url:"https://stampers.app/"}],g=t(85893),v="cfxtest:acepe88unk7fvs18436178up33hb4zkuf62a9dk1gv",useProvider=function(){var f=(0,c.useState)(),e=(0,o.Z)(f,2),t=e[0],n=e[1];return(0,c.useEffect)(function(){n(window.conflux||new ProviderConflux({}))},[]),t},conflux_ConfluxExample=function(){var f=(0,c.useState)(!1),e=(0,o.Z)(f,2),t=e[0],n=e[1],s=(0,c.useState)(""),i=(0,o.Z)(s,2),d=i[0],l=i[1],u=(0,c.useState)(""),p=(0,o.Z)(u,2),h=p[0],C=p[1],x=(0,c.useState)([]),T=(0,o.Z)(x,2),w=T[0],E=T[1],k=(0,c.useRef)(),A=(0,c.useRef)(),N=(0,c.useRef)(),j=useProvider(),O=(0,c.useCallback)(function(f){f.isConnected()&&(n(!0),Promise.all([f.request({method:"cfx_accounts"}),f.request({method:"cfx_chainId"})]).then(function(f){var e=(0,o.Z)(f,2),t=e[0],n=e[1];E(t),l(n),C(parseInt(n,16).toString(10))}).catch(console.error),f.request({method:"cfx_accounts"}).then(function(f){return E(f)}).catch(console.error))},[]),I=(0,c.useCallback)((0,a.Z)(function*(){E((yield j.request({method:"cfx_requestAccounts"})))}),[j]),S=(0,c.useCallback)((0,a.Z)(function*(){var f=yield j.request({method:"cfx_accounts"}),e=(0,o.Z)(f,1)[0];try{var t=yield j.request({method:"cfx_sendTransaction",params:[{from:e,value:"0xde0b6b3a7640000",to:e}]});console.log("send native token success: ".concat(t))}catch(f){console.log(f)}}),[j]),D=(0,c.useCallback)((0,a.Z)(function*(){var f=yield j.request({method:"cfx_accounts"}),e={from:(0,o.Z)(f,1)[0],to:v,data:b.approve(k.current.value,1e20).data};try{var t=yield j.request({method:"cfx_sendTransaction",params:[e]});console.log("approve token success: ".concat(t))}catch(f){console.log(f)}}),[j,k]),q=(0,c.useCallback)((0,a.Z)(function*(){var f=yield j.request({method:"cfx_accounts"}),e={from:(0,o.Z)(f,1)[0],to:v,data:b.transferFrom(A.current.value,N.current.value,1e19).data};try{var t=yield j.request({method:"cfx_sendTransaction",params:[e]});console.log("transfer from success: ".concat(t))}catch(f){console.log(f)}}),[j,N,A]),B=(0,c.useCallback)((0,a.Z)(function*(){var f=yield j.request({method:"cfx_accounts"}),e=(0,o.Z)(f,1)[0];try{var t=yield j.request({method:"personal_sign",params:["personal sign message example",e]});console.log("personal sign success: ".concat(t))}catch(f){console.log(f)}}),[j]),H=(0,c.useCallback)((0,a.Z)(function*(){var f=yield j.request({method:"cfx_accounts"}),e=(0,o.Z)(f,1)[0];try{var t=yield j.request({method:"cfx_signTypedData_v4",params:[e,JSON.stringify(m)]});console.log("sing typed data v4 success: ".concat(t))}catch(f){console.log(f)}}),[j]),P=(0,c.useCallback)((0,a.Z)(function*(){var f=yield j.request({method:"cfx_accounts"}),e={from:(0,o.Z)(f,1)[0],data:b.constructor("Example",18,"EP",1e4).data};try{var t=yield j.request({method:"cfx_sendTransaction",params:[e]});console.log("deploy contract success: ".concat(t))}catch(f){console.log(f)}}),[j]),M=(0,c.useCallback)((0,a.Z)(function*(){try{yield j.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:"cfxtest:acepe88unk7fvs18436178up33hb4zkuf62a9dk1gv",symbol:"cUSDT",decimals:18,image:"https://scan-icons.oss-cn-hongkong.aliyuncs.com/testnet/cfxtest%3Aacepe88unk7fvs18436178up33hb4zkuf62a9dk1gv.png"}}}),console.log("add token success")}catch(f){console.log(f)}}),[j]),R=(0,c.useCallback)((0,a.Z)(function*(){try{yield j.request({method:"wallet_addConfluxChain",params:[{chainId:"0x47",chainName:"EVM Conflux",nativeCurrency:{name:"Conflux",symbol:"CFX",decimals:18},rpcUrls:["https://evmtestnet.confluxrpc.com"],blockExplorerUrls:["https://evmtestnet.confluxscan.io"]}]}),console.log("add network success")}catch(f){console.log(f)}}),[j]),Z=(0,c.useCallback)((0,a.Z)(function*(){try{yield j.request({method:"wallet_switchConfluxChain",params:[{chainId:"0x1"}]}),console.log("switch network success")}catch(f){console.log(f)}}),[j]);return(0,c.useEffect)(function(){j&&(O(j),j.on(r.CONNECT,function(f){console.log("connected"),n(!0),l(f.chainId),C(f.networkId),j.request({method:"cfx_accounts"}).then(function(f){return E(f)}).catch(function(f){return console.log(f)})}),j.on(r.ACCOUNTS_CHANGED,function(f){E(f),console.log("cfx accountsChanged",f)}),j.on(r.CHAIN_CHANGED,function(f){l(f),C(parseInt(f,16).toString(10)),console.log("cfx chainChanged",f)}),j.on(r.DISCONNECT,function(){E([]),n(!1)}))},[O,j]),(0,g.jsxs)("div",{children:[(0,g.jsx)(y.p,{dapps:_}),!j&&(0,g.jsx)("a",{target:"_blank",href:"https://www.onekey.so/download/",children:"Install OneKey Extension →"}),j&&(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:t?"Wallet is initialized":"Wallet is not initialized"}),(0,g.jsxs)("p",{children:["chainId: ",d]}),(0,g.jsxs)("p",{children:["networkId: ",h]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("button",{disabled:w.length>0||!t,onClick:I,children:w.length?"connected":"connecte wallet"}),(0,g.jsx)("p",{children:w})]}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{disabled:0===w.length,onClick:S,children:"send native token to my self"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("input",{ref:k,placeholder:"Sepnder Address"}),(0,g.jsx)("button",{disabled:0===w.length,onClick:D,children:"approve 100 cUDST limit"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("input",{ref:A,placeholder:"from address"}),(0,g.jsx)("input",{ref:N,placeholder:"to address"}),(0,g.jsx)("button",{disabled:0===w.length,onClick:q,children:"transfer from"})]}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{disabled:0===w.length,onClick:B,children:"personal sign"})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{disabled:0===w.length,onClick:H,children:"sign typed data v4"})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{disabled:0===w.length,onClick:P,children:"deploy contract"})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{disabled:0===w.length,onClick:M,children:"add token"})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{disabled:0===w.length,onClick:R,children:"add network"})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{disabled:0===w.length,onClick:Z,children:"switch network"})})]})]})}},6424:function(f,e,t){"use strict";t.d(e,{p:function(){return DAppList}}),t(67294);var n=t(36612),s=t.n(n),i=t(85893);function DAppList(f){var e=f.dapps;return(0,i.jsxs)("div",{className:s().container,children:[(0,i.jsx)("h3",{children:"Top DApps"}),(0,i.jsx)("ul",{children:e.map(function(f){return(0,i.jsx)("li",{children:(0,i.jsxs)("a",{href:f.url,target:"_blank",children:[f.name," ↗"]})},f.name)})})]})}},36612:function(f){f.exports={container:"Home_container__d256j",main:"Home_main__VkIEL",footer:"Home_footer__yFiaX",title:"Home_title__hYX6j",description:"Home_description__uXNdx",code:"Home_code__VVrIr",grid:"Home_grid__AVljO",card:"Home_card__E5spL",logo:"Home_logo__IOQAX"}},34155:function(f){var e,t,n,s=f.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(f){if(e===setTimeout)return setTimeout(f,0);if((e===defaultSetTimout||!e)&&setTimeout)return e=setTimeout,setTimeout(f,0);try{return e(f,0)}catch(t){try{return e.call(null,f,0)}catch(t){return e.call(this,f,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(f){e=defaultSetTimout}try{t="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(f){t=defaultClearTimeout}}();var i=[],r=!1,a=-1;function cleanUpNextTick(){r&&n&&(r=!1,n.length?i=n.concat(i):a=-1,i.length&&drainQueue())}function drainQueue(){if(!r){var f=runTimeout(cleanUpNextTick);r=!0;for(var e=i.length;e;){for(n=i,i=[];++a<e;)n&&n[a].run();a=-1,e=i.length}n=null,r=!1,function(f){if(t===clearTimeout)return clearTimeout(f);if((t===defaultClearTimeout||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(f);try{t(f)}catch(e){try{return t.call(null,f)}catch(e){return t.call(this,f)}}}(f)}}function Item(f,e){this.fun=f,this.array=e}function noop(){}s.nextTick=function(f){var e=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];i.push(new Item(f,e)),1!==i.length||r||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=noop,s.addListener=noop,s.once=noop,s.off=noop,s.removeListener=noop,s.removeAllListeners=noop,s.emit=noop,s.prependListener=noop,s.prependOnceListener=noop,s.listeners=function(f){return[]},s.binding=function(f){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(f){throw Error("process.chdir is not supported")},s.umask=function(){return 0}},22519:function(f,e,t){"use strict";t.d(e,{R:function(){return getOrCreateExtInjectedJsBridge}});var n=t(57069);let{JS_BRIDGE_MESSAGE_DIRECTION:s,JS_BRIDGE_MESSAGE_EXT_CHANNEL:i}=n.consts;function getOrCreateExtInjectedJsBridge(f={}){let e=(0,n.Pk)(()=>new JsBridgeExtInjected(Object.assign(Object.assign({},f),{receiveHandler:n.gZ})));return e}let r=!1;let JsBridgeExtInjected=class JsBridgeExtInjected extends n.ZN{constructor(f){super(f),this.sendAsString=!1,this.isInjected=!0,function(f={}){let e=f.debugLogger||n.go;r||(r=!0,window.addEventListener("message",t=>{var n,r;if(t.source!==window)return;let a=t.data;if(a.channel===i&&a.direction===s.HOST_TO_INPAGE){e.extInjected("onWindowPostMessage",a);let t=a.payload,s=null!==(n=f.bridge)&&void 0!==n?n:null===(r=null==window?void 0:window.$onekey)||void 0===r?void 0:r.jsBridge;s&&s.receive(t)}},!1))}({debugLogger:this.debugLogger,bridge:this})}sendPayload(f){window.postMessage({channel:i,direction:s.INPAGE_TO_HOST,payload:f})}}}}]);
//# sourceMappingURL=1898.9d15b0b31b75f28f.js.map